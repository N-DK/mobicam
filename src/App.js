import { MapContainer, Marker, Popup, TileLayer } from 'react-leaflet';
import 'leaflet/dist/leaflet.css';
import { Icon, divIcon, point } from 'leaflet';
import MarkerClusterGroup from 'react-leaflet-cluster';

const createClusterCustomIcon = function (cluster) {
    return new divIcon({
        html: `<span class="cluster-icon">${cluster.getChildCount()}</span>`,
        className: 'custom-marker-cluster',
        iconSize: point(33, 33, true),
    });
};

const markers = [
    {
        key: '08944FE54T',
        name: '50F04253',
        merchantId: 431,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50F04253',
        nameVid: '50F04253',
        chnCount: 4,
        camIgnore: '',
        typeId: 13,
        active: 1,
        active_gps: 1,
        active_cam: 1,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FE54T',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FE54T',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1747328399',
        '5g_end_time': '1713283200',
        '5g_active_time': '1681660800',
        notiSpeed: '',
        mobicam: '002211000257',
        mobicam_status: 1,
        mobicam_mdvr: '002211000257',
        mobicam_model: 'CRMGSHT',
        mobicam_expired_date: '1744822799',
        mobicam_end_time: '1713148575',
        mobicam_active_time: '1681526175',
        serialSim: '89840480003390512016',
        speed: 6.7,
        dir: 200.23,
        online: 1,
        lasttime: 1718004379,
        gps: 1,
        gpsTime: '2024-06-10 14:26:19',
        lat: 10.825583,
        lng: 106.620407,
        licenceCode: '790071003807',
        driverName: 'Võ Thanh Long',
        driverPhone: '0989966950',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 2,
        IO: 2,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 3743,
        packing: 0,
        ac_quy: '14.28',
        sysOff: null,
        active_date: 1681526175,
        expired_date: 1744822799,
        device: '08944FE54T',
        devId: '002211000257',
    },
    {
        key: '08944FE57T',
        name: '50F04273',
        merchantId: 2223,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50F04273',
        nameVid: '50F04273',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FE57T',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FE57T',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1747328399',
        '5g_end_time': '1713283200',
        '5g_active_time': '1681660800',
        notiSpeed: '',
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480003390512040',
        speed: 0,
        dir: 180,
        online: 1,
        lasttime: 1718004374,
        gps: 1,
        gpsTime: '2024-06-10 14:26:14',
        lat: '10.755509',
        lng: '106.669579',
        licenceCode: '',
        driverName: null,
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 3,
        IO: 3,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 3255,
        packing: 4,
        ac_quy: '14.43',
        sysOff: null,
        active_date: 1684103532,
        expired_date: 1747328399,
        device: '08944FE57T',
        devId: '08944FE57T',
    },
    {
        key: '08944FDCDT',
        name: '50F04293',
        merchantId: 2223,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50F04293',
        nameVid: '50F04293',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FDCDT',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FDCDT',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1747328399',
        '5g_end_time': '1713283200',
        '5g_active_time': '1681660800',
        notiSpeed: '',
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480009268541516',
        speed: 0,
        dir: 215,
        online: 1,
        lasttime: 1718004345,
        gps: 1,
        gpsTime: '2024-06-10 14:25:45',
        lat: '10.756215',
        lng: '106.57132',
        licenceCode: '620128620171',
        driverName: 'Nguyễn Lê Trang',
        driverPhone: '0964992212',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 2,
        IO: 2,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 0,
        packing: 51945,
        ac_quy: '12.53',
        sysOff: null,
        active_date: 1684103550,
        expired_date: 1747328399,
        device: '08944FDCDT',
        devId: '08944FDCDT',
    },
    {
        key: '08944FDCCT',
        name: '50G02607',
        merchantId: 1295,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50G02607',
        nameVid: '50G02607',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FDCCT',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FDCCT',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1747328340',
        '5g_end_time': '1715744792',
        '5g_active_time': '1684122392',
        notiSpeed: 90,
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480009268541565',
        speed: 24,
        dir: 103,
        online: 1,
        lasttime: 1718004373,
        gps: 1,
        gpsTime: '2024-06-10 14:26:13',
        lat: '10.839174',
        lng: '106.647476',
        licenceCode: '790145808008',
        driverName: 'Trần Văn Hoài',
        driverPhone: '0325376421',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 3,
        IO: 3,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 1591,
        packing: 0,
        ac_quy: '13.62',
        sysOff: null,
        active_date: 1684122392,
        expired_date: 1747328340,
        device: '08944FDCCT',
        devId: '08944FDCCT',
    },
    {
        key: '08944FDDBT',
        name: '50G02619',
        merchantId: 1295,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50G02619',
        nameVid: '50G02619',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FDDBT',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FDDBT',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1747328340',
        '5g_end_time': '1715743816',
        '5g_active_time': '1684121416',
        notiSpeed: 90,
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480009268541557',
        speed: 33.01,
        dir: 29.32,
        online: 1,
        lasttime: 1718004377,
        gps: 1,
        gpsTime: '2024-06-10 14:26:17',
        lat: 10.851198,
        lng: 106.719925,
        licenceCode: '790165017275',
        driverName: 'Nguyễn Hồ Nam',
        driverPhone: '0932665079',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 3,
        IO: 3,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 10444,
        packing: 0,
        ac_quy: '14.45',
        sysOff: null,
        active_date: 1684121416,
        expired_date: 1747328340,
        device: '08944FDDBT',
        devId: '08944FDDBT',
    },
    {
        key: '08944FE02T',
        name: '50G02643',
        merchantId: 1353,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50G02643',
        nameVid: '50G02643',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FE02T',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FE02T',
        '5ggps_model': '5GGPS ESIM',
        '5g_expired_date': '1721817196',
        '5g_end_time': '1721817196',
        '5g_active_time': '1690194796',
        notiSpeed: 90,
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480009268541581',
        speed: 0,
        dir: 0,
        online: 1,
        lasttime: 1718004325,
        gps: 1,
        gpsTime: '2024-06-10 14:25:25',
        lat: '10.746643',
        lng: '106.642937',
        licenceCode: '790198254786',
        driverName: 'Thạch Thanh Hoài',
        driverPhone: '0979336309',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 3,
        IO: 3,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 170,
        packing: 0,
        ac_quy: '14.41',
        sysOff: null,
        active_date: 1690194796,
        expired_date: 1721817196,
        device: '08944FE02T',
        devId: '08944FE02T',
    },
    {
        key: '08944FEE7T',
        name: '50G02648',
        merchantId: 1295,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50G02648',
        nameVid: '50G02648',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FEE7T',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FEE7T',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1747328340',
        '5g_end_time': '1715749727',
        '5g_active_time': '1684127327',
        notiSpeed: 90,
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480009333689100',
        speed: 31,
        dir: 312,
        online: 1,
        lasttime: 1718004375,
        gps: 1,
        gpsTime: '2024-06-10 14:26:15',
        lat: '10.793591',
        lng: '106.659279',
        licenceCode: '',
        driverName: null,
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 3,
        IO: 3,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 3670,
        packing: 0,
        ac_quy: '13.49',
        sysOff: null,
        active_date: 1684127327,
        expired_date: 1747328340,
        device: '08944FEE7T',
        devId: '08944FEE7T',
    },
    {
        key: '08F2BA250T',
        name: '50G02651',
        merchantId: 1353,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50G02651',
        nameVid: '50G02651',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08F2BA250T',
        '5ggps_status': 1,
        '5ggps_mdvr': '08F2BA250T',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1721817306',
        '5g_end_time': '1721817306',
        '5g_active_time': '1690194906',
        notiSpeed: 90,
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89852202312250006700',
        speed: 0,
        dir: 322,
        online: 1,
        lasttime: 1718004360,
        gps: 1,
        gpsTime: '2024-06-10 14:26:00',
        lat: '10.88669',
        lng: '106.817383',
        licenceCode: '790076240485',
        driverName: 'Nguyễn Chí Dũng',
        driverPhone: '0903385373',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 0,
        IO: 0,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 0,
        packing: 3293,
        ac_quy: '12.64',
        sysOff: null,
        active_date: 1690194906,
        expired_date: 1721817306,
        device: '08F2BA250T',
        devId: '08F2BA250T',
    },
    {
        key: '08944FDEFT',
        name: '50G02658',
        merchantId: 1295,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50G02658',
        nameVid: '50G02658',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FDEFT',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FDEFT',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1747328340',
        '5g_end_time': '1715748284',
        '5g_active_time': '1684125884',
        notiSpeed: 90,
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480009268541532',
        speed: 0,
        dir: 284,
        online: 1,
        lasttime: 1718004230,
        gps: 1,
        gpsTime: '2024-06-10 14:23:50',
        lat: '10.845953',
        lng: '106.64077',
        licenceCode: '790182251153',
        driverName: 'Thạch Nhã',
        driverPhone: '0375585350',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 2,
        IO: 2,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 0,
        packing: 1738,
        ac_quy: '10.74',
        sysOff: null,
        active_date: 1684125884,
        expired_date: 1747328340,
        device: '08944FDEFT',
        devId: '08944FDEFT',
    },
    {
        key: '08944FDDDT',
        name: '50G02699',
        merchantId: 1295,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50G02699',
        nameVid: '50G02699',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FDDDT',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FDDDT',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1747328340',
        '5g_end_time': '1715743774',
        '5g_active_time': '1684127327',
        notiSpeed: 90,
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480009333689118',
        speed: 10.59,
        dir: 23.59,
        online: 1,
        lasttime: 1718004378,
        gps: 1,
        gpsTime: '2024-06-10 14:26:18',
        lat: 10.84543,
        lng: 106.779228,
        licenceCode: '920157003313',
        driverName: 'Nguyễn Trung Trực',
        driverPhone: '0333879886',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 3,
        IO: 3,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 23819,
        packing: 411,
        ac_quy: '13.82',
        sysOff: null,
        active_date: 1684121374,
        expired_date: 1747328340,
        device: '08944FDDDT',
        devId: '08944FDDDT',
    },
    {
        key: '08944FDF9T',
        name: '50H26233',
        merchantId: 1295,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50H26233',
        nameVid: '50H26233',
        chnCount: 0,
        camIgnore: '',
        typeId: 33,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FDF9T',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FDF9T',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1728876707',
        '5g_end_time': '1728876707',
        '5g_active_time': '1697254307',
        notiSpeed: 70,
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480009268541599',
        speed: 23.29,
        dir: 15.69,
        online: 1,
        lasttime: 1718004377,
        gps: 1,
        gpsTime: '2024-06-10 14:26:17',
        lat: 10.773588,
        lng: 106.586784,
        licenceCode: '790084032960',
        driverName: 'Nguyễn Hoàng Huynh Em',
        driverPhone: '0903323960',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 3,
        IO: 3,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 24393,
        packing: 0,
        ac_quy: '13.85',
        sysOff: null,
        active_date: 1697254307,
        expired_date: 1728876707,
        device: '08944FDF9T',
        devId: '08944FDF9T',
    },
    {
        key: '08F2BA0DDT',
        name: '50H26580',
        merchantId: 1295,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50H26580',
        nameVid: '50H26580',
        chnCount: 0,
        camIgnore: '',
        typeId: 33,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08F2BA0DDT',
        '5ggps_status': 1,
        '5ggps_mdvr': '08F2BA0DDT',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1728876791',
        '5g_end_time': '1728876791',
        '5g_active_time': '1697254391',
        notiSpeed: 70,
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89852202312250008516',
        speed: 7.74,
        dir: 17.13,
        online: 1,
        lasttime: 1718004376,
        gps: 1,
        gpsTime: '2024-06-10 14:26:16',
        lat: 10.883511,
        lng: 106.744301,
        licenceCode: '',
        driverName: null,
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 1,
        IO: 1,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 24406,
        packing: 0,
        ac_quy: '14.30',
        sysOff: null,
        active_date: 1697254391,
        expired_date: 1728876791,
        device: '08F2BA0DDT',
        devId: '08F2BA0DDT',
    },
    {
        key: '08944FDF0T',
        name: '50H26642',
        merchantId: 1295,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50H26642',
        nameVid: '50H26642',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FDF0T',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FDF0T',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1728878767',
        '5g_end_time': '1728878767',
        '5g_active_time': '1697256367',
        notiSpeed: 90,
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480009268541508',
        speed: 15.96,
        dir: 162.41,
        online: 1,
        lasttime: 1718004379,
        gps: 1,
        gpsTime: '2024-06-10 14:26:19',
        lat: 10.86795,
        lng: 106.728096,
        licenceCode: '',
        driverName: null,
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 3,
        IO: 3,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 6755,
        packing: 355,
        ac_quy: '14.51',
        sysOff: null,
        active_date: 1697256367,
        expired_date: 1728878767,
        device: '08944FDF0T',
        devId: '08944FDF0T',
    },
    {
        key: '08944FE55T',
        name: '50LD19682',
        merchantId: 2223,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50LD19682',
        nameVid: '50LD19682',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FE55T',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FE55T',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1747328399',
        '5g_end_time': '1713283200',
        '5g_active_time': '1681660800',
        notiSpeed: '',
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480003390512024',
        speed: 0,
        dir: 158,
        online: 1,
        lasttime: 1718004354,
        gps: 1,
        gpsTime: '2024-06-10 14:25:54',
        lat: '10.75626',
        lng: '106.571358',
        licenceCode: '510007000812',
        driverName: 'Nguyễn Huy Thông',
        driverPhone: '0965346765',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 2,
        IO: 2,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 0,
        packing: 51954,
        ac_quy: '12.28',
        sysOff: null,
        active_date: 1684103567,
        expired_date: 1747328399,
        device: '08944FE55T',
        devId: '08944FE55T',
    },
    {
        key: '08944FDCET',
        name: '50LD19827',
        merchantId: 2223,
        motocadeid: 0,
        serverId: 2,
        name_Vid: '50LD19827',
        nameVid: '50LD19827',
        chnCount: 0,
        camIgnore: '',
        typeId: 32,
        active: 1,
        active_gps: 1,
        active_cam: 2,
        endDateCetificate: '',
        certificateCode: '',
        '5ggps': '08944FDCET',
        '5ggps_status': 1,
        '5ggps_mdvr': '08944FDCET',
        '5ggps_model': '5G GPS',
        '5g_expired_date': '1747328399',
        '5g_end_time': '1713283200',
        '5g_active_time': '1681660800',
        notiSpeed: '',
        mobicam: '',
        mobicam_status: '',
        mobicam_mdvr: '',
        mobicam_model: '',
        mobicam_expired_date: '',
        mobicam_end_time: '',
        mobicam_active_time: '',
        serialSim: '89840480009268541524',
        speed: 40,
        dir: 210,
        online: 1,
        lasttime: 1718004374,
        gps: 1,
        gpsTime: '2024-06-10 14:26:14',
        lat: '10.842373',
        lng: '106.717934',
        licenceCode: '790100252888',
        driverName: 'Châu Thanh Tài',
        driverPhone: '0907314704',
        endDateLicense: 0,
        driverSwp: '0',
        accIO: 3,
        IO: 3,
        cardId: 0,
        locationAdrress: null,
        netType: null,
        temp: 0,
        fuel: null,
        t1: 0,
        s1: 0,
        s2: 0,
        s3: 0,
        s4: 0,
        running: 730,
        packing: 0,
        ac_quy: '14.01',
        sysOff: null,
        active_date: 1684103516,
        expired_date: 1747328399,
        device: '08944FDCET',
        devId: '08944FDCET',
    },
];

const MARKER = (dir, state) =>
    `data:image/svg+xml;utf8,${encodeURIComponent(`
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="transform: rotate(${dir}deg);" viewBox="0 0 55 114.81"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><rect class="cls-1" fill="${state}" x="1.64" y="42.64" width="40.99" height="69.7"></rect><rect class="cls-2" x="1.7" y="42.59" width="2.58" height="2.47"></rect><rect class="cls-2" x="40.06" y="42.59" width="2.58" height="2.47"></rect><rect class="cls-2" x="1.7" y="109.88" width="2.58" height="2.47"></rect><rect class="cls-2" x="40.06" y="109.88" width="2.58" height="2.47"></rect><rect class="cls-3" fill="${state}" x="3.01" y="44.12" width="38.25" height="66.74"></rect><path class="cls-4" d="M1.62,112h41v1.67a1.18,1.18,0,0,1-1.18,1.18h-39a.82.82,0,0,1-.82-.82Z"></path><path class="cls-4" d="M40.74,8.63V4.05c-.86-2.79-4.53-4-10.36-4h-16C8.55,0,4.89,1.26,4,4.05V8.63c.15-.65.32-1.24.49-1.83s.38-1.3.55-2h0a2.88,2.88,0,0,1,.66-1.27,3.88,3.88,0,0,1,1.19-.94h0A5.36,5.36,0,0,1,8.4,2.35,3.49,3.49,0,0,0,9.61,2.2a3,3,0,0,1,.79-.49,5.27,5.27,0,0,1,1-.28h0c1.82-.12,3.65-.18,5.48-.21s3.65,0,5.47,0h0c1.82,0,3.64,0,5.47,0s3.66.09,5.48.21h0a5.27,5.27,0,0,1,1,.28,3,3,0,0,1,.79.49,3.49,3.49,0,0,0,1.21.15,5.36,5.36,0,0,1,1.47.19h0A3.88,3.88,0,0,1,39,3.49a3,3,0,0,1,.66,1.27h0c.17.74.36,1.39.54,2S40.59,8,40.74,8.63Z"></path><path class="cls-5" fill="${state}" d="M4.25,42.52H40.52L40.4,22l.18-.32a1.23,1.23,0,0,0,.16-.61V10l-.18,0-.13-1.07c-.16-.74-.35-1.39-.54-2s-.38-1.32-.54-2.07h0a2.74,2.74,0,0,0-.59-1.11,3.47,3.47,0,0,0-1.07-.84,4.7,4.7,0,0,0-1.34-.16,3.27,3.27,0,0,1-1.41-.23h0a2.64,2.64,0,0,0-.7-.43,4.38,4.38,0,0,0-.92-.25c-1.83-.13-3.64-.19-5.46-.22s-3.64,0-5.46,0h-.16c-1.77,0-3.54,0-5.31,0s-3.64.09-5.46.22a4.38,4.38,0,0,0-.92.25,2.49,2.49,0,0,0-.7.43h0a3.3,3.3,0,0,1-1.42.23,4.67,4.67,0,0,0-1.33.16A3.25,3.25,0,0,0,6,3.72a2.74,2.74,0,0,0-.59,1.11h0c-.16.75-.35,1.41-.55,2.07s-.37,1.29-.54,2L4.21,10,4,10V21.1a1.23,1.23,0,0,0,.16.61l.17.32Z"></path><path class="cls-6" d="M4,8.65c.16-.66.33-1.26.5-1.85s.38-1.3.55-2h0a2.88,2.88,0,0,1,.66-1.27,3.88,3.88,0,0,1,1.19-.94h0A5.36,5.36,0,0,1,8.4,2.35,3.49,3.49,0,0,0,9.61,2.2a3,3,0,0,1,.79-.49,5.27,5.27,0,0,1,1-.28h0c1.82-.12,3.65-.18,5.48-.21s3.65,0,5.47,0h0c1.82,0,3.64,0,5.47,0s3.66.09,5.48.21h0a5.27,5.27,0,0,1,1,.28,3,3,0,0,1,.79.49,3.49,3.49,0,0,0,1.21.15,5.36,5.36,0,0,1,1.47.19h0A3.88,3.88,0,0,1,39,3.49a3,3,0,0,1,.66,1.27h0c.17.74.36,1.39.54,2s.35,1.17.5,1.82V10l-.18,0-.13-1.07c-.16-.74-.35-1.39-.54-2s-.38-1.32-.54-2.07h0a2.74,2.74,0,0,0-.59-1.11,3.47,3.47,0,0,0-1.07-.84,4.7,4.7,0,0,0-1.34-.16,3.27,3.27,0,0,1-1.41-.23h0a2.64,2.64,0,0,0-.7-.43,4.38,4.38,0,0,0-.92-.25c-1.83-.13-3.64-.19-5.46-.22s-3.64,0-5.46,0h-.16c-1.77,0-3.54,0-5.31,0s-3.64.09-5.46.22a4.38,4.38,0,0,0-.92.25,2.49,2.49,0,0,0-.7.43h0a3.3,3.3,0,0,1-1.42.23,4.67,4.67,0,0,0-1.33.16A3.25,3.25,0,0,0,6,3.72a2.74,2.74,0,0,0-.59,1.11h0c-.16.75-.35,1.41-.55,2.07s-.37,1.29-.54,2L4.21,10,4,10Z"></path><path class="cls-7" d="M10.53,2.06,9.37,16.32V2.64a1.13,1.13,0,0,0,.46-.15h0A2.65,2.65,0,0,1,10.53,2.06Z"></path><path class="cls-8" d="M6.46,3.28l0,15.21-.21.17,0-15.19A1.9,1.9,0,0,1,6.46,3.28Z"></path><path class="cls-8" d="M7.68,42.42V31.94h0c0-.35,0-.69,0-1a4.83,4.83,0,0,0-.18-.89h0c-.38-1.35-.77-2.54-1.15-3.74s-.76-2.37-1.14-3.71L4.46,22v0L4.35,42.42Zm.2-10.48h0V42.62H4.14v-.1l.12-20.47-.16-.29,0-.06h0a.09.09,0,0,1,0-.06l.16-.12,1.12.94,0,.05c.38,1.35.76,2.55,1.15,3.74S7.28,28.64,7.66,30a4.54,4.54,0,0,1,.18.92A6.93,6.93,0,0,1,7.88,31.94Z"></path><polygon class="cls-9" points="4.9 38.41 4.85 23.12 6.87 29.31 7.2 30.68 7.15 38.9 4.9 38.41"></polygon><rect class="cls-8" x="4.35" y="40.11" width="3.4" height="0.37"></rect><path class="cls-4" d="M5.22,25.69c0-.23,0-.46-.07-.7A21.56,21.56,0,0,0,.7,26.35,3.49,3.49,0,0,0,0,27.83a.46.46,0,0,0,.15.43l3.23-.87A.78.78,0,0,0,3.67,27c0-.22-.06-.55-.08-.76C4.13,26,4.67,25.92,5.22,25.69Z"></path><path class="cls-10" d="M22.38,28.89a118.72,118.72,0,0,0-13.3.75,1.59,1.59,0,0,1-.88-1L5.57,19.28a8.15,8.15,0,0,1,4.11-2.35,74.16,74.16,0,0,1,12.7-1.32,74.27,74.27,0,0,1,12.71,1.32,8.15,8.15,0,0,1,4.11,2.35c-.88,3.11-1.76,6.21-2.63,9.32a1.59,1.59,0,0,1-.88,1A118.76,118.76,0,0,0,22.38,28.89Z"></path><rect class="cls-2" x="40.06" y="42.59" width="2.58" height="2.47"></rect><path class="cls-7" d="M34.24,2.06,35.4,16.32V2.64a1.13,1.13,0,0,1-.46-.15h0A2.65,2.65,0,0,0,34.24,2.06Z"></path><path class="cls-8" d="M38.31,3.28l0,15.21.21.17,0-15.19Z"></path><path class="cls-8" d="M36.89,42.52V31.94h0a6.93,6.93,0,0,1,0-1,4.54,4.54,0,0,1,.18-.92c.38-1.35.77-2.55,1.15-3.74s.77-2.39,1.15-3.74l0-.05,1.13-.94.16.12,0,.06h0l0,.06-.16.29.11,20.47v.1H36.89v-.1Zm.2-10.58V42.42h3.33L40.3,22v0l-.71.59c-.38,1.34-.76,2.53-1.14,3.71s-.77,2.39-1.15,3.74h0a4.83,4.83,0,0,0-.18.89c0,.31,0,.65,0,1Z"></path><polygon class="cls-11" points="39.87 38.41 39.92 23.12 37.89 29.31 37.56 30.68 37.62 38.9 39.87 38.41"></polygon><rect class="cls-8" x="37.02" y="40.11" width="3.4" height="0.37"></rect><path class="cls-4" d="M39.55,25.69c0-.23.05-.46.07-.7a21.56,21.56,0,0,1,4.45,1.36,3.49,3.49,0,0,1,.69,1.48.46.46,0,0,1-.15.43l-3.24-.87A.82.82,0,0,1,41.1,27c0-.22,0-.55.08-.76C40.64,26,40.1,25.92,39.55,25.69Z"></path></g></g></svg>
    `)}`;

const customIcon = (dir, state) =>
    new Icon({
        iconUrl: MARKER(dir, state),
        iconSize: [40, 40],
        iconAnchor: [12, 12],
        popupAnchor: [0, 0],
    });

function App() {
    const position = [10.859469, 106.735173];

    return (
        <div className="w-screen h-screen">
            <MapContainer
                center={position}
                zoom={13}
                scrollWheelZoom={true}
                // maxZoom={21}
            >
                <TileLayer
                    attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                    url="https://api.maptiler.com/maps/basic-v2/256/{z}/{x}/{y}.png?key=toU6ZdFKgGUvtZCs7NXx"
                />
                <MarkerClusterGroup
                    chunkedLoading
                    iconCreateFunction={createClusterCustomIcon}
                >
                    {markers.map((marker, index) => (
                        <Marker
                            key={index}
                            position={[marker.lat, marker.lng]}
                            icon={customIcon(
                                marker.dir,
                                marker.speed === 0
                                    ? marker.accIO === 0
                                        ? '#e74b3c'
                                        : '#4397c9'
                                    : '#00aa9a',
                            )}
                        >
                            <Popup>{marker.driverName}</Popup>
                        </Marker>
                    ))}
                </MarkerClusterGroup>
            </MapContainer>
        </div>
    );
}

export default App;
